{"ast":null,"code":"import React,{useEffect,useState}from'react';import'./ServiceStatus.css';import apiService from'../services/api';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function ServiceStatus(_ref){let{user}=_ref;const[subscription,setSubscription]=useState(null);const[isOnline,setIsOnline]=useState(false);useEffect(()=>{const fetchSubscription=async()=>{if(!(user!==null&&user!==void 0&&user.id)&&!(user!==null&&user!==void 0&&user.telegram_id))return;try{const userId=user.id||user.telegram_id;const subData=await apiService.getSubscription(userId);setSubscription(subData);}catch(error){console.error('Error fetching subscription:',error);}};fetchSubscription();},[user]);const formatDate=dateString=>{if(!dateString)return'';const date=new Date(dateString);return date.toLocaleDateString('ru-RU',{day:'numeric',month:'long',year:'numeric'});};const subscriptionDate=subscription!==null&&subscription!==void 0&&subscription.expires_at?\"\\u0434\\u043E \".concat(formatDate(subscription.expires_at)):'до 31 декабря 2025';const subscriptionType=subscription!==null&&subscription!==void 0&&subscription.is_trial?'пробный период':subscription!==null&&subscription!==void 0&&subscription.is_active?'активна':'неактивна';return/*#__PURE__*/_jsxs(\"div\",{className:\"service-status\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"service-name\",children:\"Beznet\"}),/*#__PURE__*/_jsx(\"div\",{className:\"subscription-date\",children:subscriptionDate}),/*#__PURE__*/_jsx(\"div\",{className:\"service-state\",children:isOnline?'online':'offline'}),/*#__PURE__*/_jsx(\"div\",{className:\"subscription-type\",children:subscriptionType})]});}export default ServiceStatus;","map":{"version":3,"names":["React","useEffect","useState","apiService","jsx","_jsx","jsxs","_jsxs","ServiceStatus","_ref","user","subscription","setSubscription","isOnline","setIsOnline","fetchSubscription","id","telegram_id","userId","subData","getSubscription","error","console","formatDate","dateString","date","Date","toLocaleDateString","day","month","year","subscriptionDate","expires_at","concat","subscriptionType","is_trial","is_active","className","children"],"sources":["/Users/nikitamozaev/Desktop/beznet_miniapp/front/src/components/ServiceStatus.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport './ServiceStatus.css';\nimport apiService from '../services/api';\n\nfunction ServiceStatus({ user }) {\n  const [subscription, setSubscription] = useState(null);\n  const [isOnline, setIsOnline] = useState(false);\n\n  useEffect(() => {\n    const fetchSubscription = async () => {\n      if (!user?.id && !user?.telegram_id) return;\n\n      try {\n        const userId = user.id || user.telegram_id;\n        const subData = await apiService.getSubscription(userId);\n        setSubscription(subData);\n      } catch (error) {\n        console.error('Error fetching subscription:', error);\n      }\n    };\n\n    fetchSubscription();\n  }, [user]);\n\n  const formatDate = (dateString) => {\n    if (!dateString) return '';\n    const date = new Date(dateString);\n    return date.toLocaleDateString('ru-RU', { \n      day: 'numeric', \n      month: 'long', \n      year: 'numeric' \n    });\n  };\n\n  const subscriptionDate = subscription?.expires_at \n    ? `до ${formatDate(subscription.expires_at)}`\n    : 'до 31 декабря 2025';\n  \n  const subscriptionType = subscription?.is_trial \n    ? 'пробный период'\n    : subscription?.is_active \n    ? 'активна'\n    : 'неактивна';\n\n  return (\n    <div className=\"service-status\">\n      <div className=\"service-name\">Beznet</div>\n      <div className=\"subscription-date\">{subscriptionDate}</div>\n      <div className=\"service-state\">{isOnline ? 'online' : 'offline'}</div>\n      <div className=\"subscription-type\">{subscriptionType}</div>\n    </div>\n  );\n}\n\nexport default ServiceStatus;\n\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAClD,MAAO,qBAAqB,CAC5B,MAAO,CAAAC,UAAU,KAAM,iBAAiB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAEzC,QAAS,CAAAC,aAAaA,CAAAC,IAAA,CAAW,IAAV,CAAEC,IAAK,CAAC,CAAAD,IAAA,CAC7B,KAAM,CAACE,YAAY,CAAEC,eAAe,CAAC,CAAGV,QAAQ,CAAC,IAAI,CAAC,CACtD,KAAM,CAACW,QAAQ,CAAEC,WAAW,CAAC,CAAGZ,QAAQ,CAAC,KAAK,CAAC,CAE/CD,SAAS,CAAC,IAAM,CACd,KAAM,CAAAc,iBAAiB,CAAG,KAAAA,CAAA,GAAY,CACpC,GAAI,EAACL,IAAI,SAAJA,IAAI,WAAJA,IAAI,CAAEM,EAAE,GAAI,EAACN,IAAI,SAAJA,IAAI,WAAJA,IAAI,CAAEO,WAAW,EAAE,OAErC,GAAI,CACF,KAAM,CAAAC,MAAM,CAAGR,IAAI,CAACM,EAAE,EAAIN,IAAI,CAACO,WAAW,CAC1C,KAAM,CAAAE,OAAO,CAAG,KAAM,CAAAhB,UAAU,CAACiB,eAAe,CAACF,MAAM,CAAC,CACxDN,eAAe,CAACO,OAAO,CAAC,CAC1B,CAAE,MAAOE,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,8BAA8B,CAAEA,KAAK,CAAC,CACtD,CACF,CAAC,CAEDN,iBAAiB,CAAC,CAAC,CACrB,CAAC,CAAE,CAACL,IAAI,CAAC,CAAC,CAEV,KAAM,CAAAa,UAAU,CAAIC,UAAU,EAAK,CACjC,GAAI,CAACA,UAAU,CAAE,MAAO,EAAE,CAC1B,KAAM,CAAAC,IAAI,CAAG,GAAI,CAAAC,IAAI,CAACF,UAAU,CAAC,CACjC,MAAO,CAAAC,IAAI,CAACE,kBAAkB,CAAC,OAAO,CAAE,CACtCC,GAAG,CAAE,SAAS,CACdC,KAAK,CAAE,MAAM,CACbC,IAAI,CAAE,SACR,CAAC,CAAC,CACJ,CAAC,CAED,KAAM,CAAAC,gBAAgB,CAAGpB,YAAY,SAAZA,YAAY,WAAZA,YAAY,CAAEqB,UAAU,iBAAAC,MAAA,CACvCV,UAAU,CAACZ,YAAY,CAACqB,UAAU,CAAC,EACzC,oBAAoB,CAExB,KAAM,CAAAE,gBAAgB,CAAGvB,YAAY,SAAZA,YAAY,WAAZA,YAAY,CAAEwB,QAAQ,CAC3C,gBAAgB,CAChBxB,YAAY,SAAZA,YAAY,WAAZA,YAAY,CAAEyB,SAAS,CACvB,SAAS,CACT,WAAW,CAEf,mBACE7B,KAAA,QAAK8B,SAAS,CAAC,gBAAgB,CAAAC,QAAA,eAC7BjC,IAAA,QAAKgC,SAAS,CAAC,cAAc,CAAAC,QAAA,CAAC,QAAM,CAAK,CAAC,cAC1CjC,IAAA,QAAKgC,SAAS,CAAC,mBAAmB,CAAAC,QAAA,CAAEP,gBAAgB,CAAM,CAAC,cAC3D1B,IAAA,QAAKgC,SAAS,CAAC,eAAe,CAAAC,QAAA,CAAEzB,QAAQ,CAAG,QAAQ,CAAG,SAAS,CAAM,CAAC,cACtER,IAAA,QAAKgC,SAAS,CAAC,mBAAmB,CAAAC,QAAA,CAAEJ,gBAAgB,CAAM,CAAC,EACxD,CAAC,CAEV,CAEA,cAAe,CAAA1B,aAAa","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
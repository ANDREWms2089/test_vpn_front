{"ast":null,"code":"import _objectSpread from\"/Users/nikitamozaev/Desktop/beznet_miniapp/front/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";const API_BASE_URL='https://api.real-2.space';class ApiService{async request(endpoint){let options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};const method=options.method||'GET';const url=\"\".concat(API_BASE_URL).concat(endpoint);const headers=_objectSpread({'Accept':'application/json'},options.headers);if(method!=='GET'&&method!=='HEAD'){headers['Content-Type']='application/json';}const config={method:method,mode:'cors',credentials:'omit',redirect:'manual',headers:headers};if(options.body){if(typeof options.body==='object'){config.body=JSON.stringify(options.body);}else{config.body=options.body;}}try{let response=await fetch(url,config);if(response.status===307||response.status===308){const redirectUrl=response.headers.get('Location');if(redirectUrl){const redirectConfig=_objectSpread(_objectSpread({},config),{},{redirect:'follow'});response=await fetch(redirectUrl,redirectConfig);}}if(response.status===0||response.type==='opaque'){throw new Error('CORS error: Unable to fetch resource');}let data;const contentType=response.headers.get('content-type');if(contentType&&contentType.includes('application/json')){data=await response.json();}else{const text=await response.text();try{data=JSON.parse(text);}catch(_unused){data={detail:text};}}if(!response.ok){let msg=\"HTTP error! status: \".concat(response.status);if(data.detail){if(Array.isArray(data.detail)){msg=data.detail.map(d=>d.msg||JSON.stringify(d)).join('; ');}else if(typeof data.detail==='string'){msg=data.detail;}else{msg=JSON.stringify(data.detail);}}else if(data.msg){msg=data.msg;}const err=new Error(msg);err.status=response.status;throw err;}return data;}catch(error){console.error('API request error:',error);throw error;}}async createUser(userData){return this.request('/users/',{method:'POST',body:userData});}async getUser(userId){return this.request(\"/users/\".concat(userId,\"/\"));}async getReferralLink(userId){return this.request(\"/users/\".concat(userId,\"/referral-link/\"));}async getReferralCount(userId){return this.request(\"/users/\".concat(userId,\"/referral-count/\"));}async createKey(userId){return this.request('/users/key/',{method:'POST',body:{userid:Number(userId)}});}}export default new ApiService();","map":{"version":3,"names":["API_BASE_URL","ApiService","request","endpoint","options","arguments","length","undefined","method","url","concat","headers","_objectSpread","config","mode","credentials","redirect","body","JSON","stringify","response","fetch","status","redirectUrl","get","redirectConfig","type","Error","data","contentType","includes","json","text","parse","_unused","detail","ok","msg","Array","isArray","map","d","join","err","error","console","createUser","userData","getUser","userId","getReferralLink","getReferralCount","createKey","userid","Number"],"sources":["/Users/nikitamozaev/Desktop/beznet_miniapp/front/src/services/api.js"],"sourcesContent":["const API_BASE_URL = 'https://api.real-2.space';\n\nclass ApiService {\n  async request(endpoint, options = {}) {\n    const method = options.method || 'GET';\n    const url = `${API_BASE_URL}${endpoint}`;\n\n    const headers = {\n      'Accept': 'application/json',\n      ...options.headers,\n    };\n\n    if (method !== 'GET' && method !== 'HEAD') {\n      headers['Content-Type'] = 'application/json';\n    }\n\n    const config = {\n      method: method,\n      mode: 'cors',\n      credentials: 'omit',\n      redirect: 'manual',\n      headers: headers,\n    };\n\n    if (options.body) {\n      if (typeof options.body === 'object') {\n        config.body = JSON.stringify(options.body);\n      } else {\n        config.body = options.body;\n      }\n    }\n\n    try {\n      let response = await fetch(url, config);\n\n      if (response.status === 307 || response.status === 308) {\n        const redirectUrl = response.headers.get('Location');\n        if (redirectUrl) {\n          const redirectConfig = { ...config, redirect: 'follow' };\n          response = await fetch(redirectUrl, redirectConfig);\n        }\n      }\n\n      if (response.status === 0 || response.type === 'opaque') {\n        throw new Error('CORS error: Unable to fetch resource');\n      }\n\n      let data;\n      const contentType = response.headers.get('content-type');\n      if (contentType && contentType.includes('application/json')) {\n        data = await response.json();\n      } else {\n        const text = await response.text();\n        try {\n          data = JSON.parse(text);\n        } catch {\n          data = { detail: text };\n        }\n      }\n\n      if (!response.ok) {\n        let msg = `HTTP error! status: ${response.status}`;\n        if (data.detail) {\n          if (Array.isArray(data.detail)) {\n            msg = data.detail.map((d) => d.msg || JSON.stringify(d)).join('; ');\n          } else if (typeof data.detail === 'string') {\n            msg = data.detail;\n          } else {\n            msg = JSON.stringify(data.detail);\n          }\n        } else if (data.msg) {\n          msg = data.msg;\n        }\n        const err = new Error(msg);\n        err.status = response.status;\n        throw err;\n      }\n\n      return data;\n    } catch (error) {\n      console.error('API request error:', error);\n      throw error;\n    }\n  }\n\n  async createUser(userData) {\n    return this.request('/users/', {\n      method: 'POST',\n      body: userData,\n    });\n  }\n\n  async getUser(userId) {\n    return this.request(`/users/${userId}/`);\n  }\n\n  async getReferralLink(userId) {\n    return this.request(`/users/${userId}/referral-link/`);\n  }\n\n  async getReferralCount(userId) {\n    return this.request(`/users/${userId}/referral-count/`);\n  }\n\n  async createKey(userId) {\n    return this.request('/users/key/', {\n      method: 'POST',\n      body: { userid: Number(userId) },\n    });\n  }\n}\n\nexport default new ApiService();\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
{"ast":null,"code":"const API_BASE_URL = 'https://api.real-2.space';\nclass ApiService {\n  async request(endpoint, options = {}) {\n    const method = options.method || 'GET';\n    const url = `${API_BASE_URL}${endpoint}`;\n    const headers = {\n      'Accept': 'application/json',\n      ...options.headers\n    };\n    if (method !== 'GET' && method !== 'HEAD') {\n      headers['Content-Type'] = 'application/json';\n    }\n    const config = {\n      method: method,\n      mode: 'cors',\n      credentials: 'omit',\n      redirect: 'manual',\n      headers: headers\n    };\n    if (options.body) {\n      if (typeof options.body === 'object') {\n        config.body = JSON.stringify(options.body);\n      } else {\n        config.body = options.body;\n      }\n    }\n    try {\n      let response = await fetch(url, config);\n      if (response.status === 307 || response.status === 308) {\n        const redirectUrl = response.headers.get('Location');\n        if (redirectUrl) {\n          const redirectConfig = {\n            ...config,\n            redirect: 'follow'\n          };\n          response = await fetch(redirectUrl, redirectConfig);\n        }\n      }\n      if (response.status === 0 || response.type === 'opaque') {\n        throw new Error('CORS error: Unable to fetch resource');\n      }\n      let data;\n      const contentType = response.headers.get('content-type');\n      if (contentType && contentType.includes('application/json')) {\n        data = await response.json();\n      } else {\n        const text = await response.text();\n        try {\n          data = JSON.parse(text);\n        } catch {\n          data = {\n            detail: text\n          };\n        }\n      }\n      if (!response.ok) {\n        throw new Error(data.detail || `HTTP error! status: ${response.status}`);\n      }\n      return data;\n    } catch (error) {\n      console.error('API request error:', error);\n      throw error;\n    }\n  }\n  async createUser(userData) {\n    return this.request('/users/', {\n      method: 'POST',\n      body: userData\n    });\n  }\n  async getUser(userId) {\n    return this.request(`/users/${userId}/`);\n  }\n  async updateUser(userId, userData) {\n    return this.request(`/users/${userId}/`, {\n      method: 'PUT',\n      body: userData\n    });\n  }\n  async getSubscription(userId) {\n    return this.request(`/users/${userId}/subscription/`);\n  }\n  async createSubscription(userId, subscriptionData) {\n    return this.request(`/users/${userId}/subscription/`, {\n      method: 'POST',\n      body: subscriptionData\n    });\n  }\n}\nexport default new ApiService();","map":{"version":3,"names":["API_BASE_URL","ApiService","request","endpoint","options","method","url","headers","config","mode","credentials","redirect","body","JSON","stringify","response","fetch","status","redirectUrl","get","redirectConfig","type","Error","data","contentType","includes","json","text","parse","detail","ok","error","console","createUser","userData","getUser","userId","updateUser","getSubscription","createSubscription","subscriptionData"],"sources":["/Users/nikitamozaev/Desktop/beznet_miniapp/front/src/services/api.js"],"sourcesContent":["const API_BASE_URL = 'https://api.real-2.space';\n\nclass ApiService {\n  async request(endpoint, options = {}) {\n    const method = options.method || 'GET';\n    const url = `${API_BASE_URL}${endpoint}`;\n    \n    const headers = {\n      'Accept': 'application/json',\n      ...options.headers,\n    };\n    \n    if (method !== 'GET' && method !== 'HEAD') {\n      headers['Content-Type'] = 'application/json';\n    }\n    \n    const config = {\n      method: method,\n      mode: 'cors',\n      credentials: 'omit',\n      redirect: 'manual',\n      headers: headers,\n    };\n\n    if (options.body) {\n      if (typeof options.body === 'object') {\n        config.body = JSON.stringify(options.body);\n      } else {\n        config.body = options.body;\n      }\n    }\n\n    try {\n      let response = await fetch(url, config);\n      \n      if (response.status === 307 || response.status === 308) {\n        const redirectUrl = response.headers.get('Location');\n        if (redirectUrl) {\n          const redirectConfig = { ...config, redirect: 'follow' };\n          response = await fetch(redirectUrl, redirectConfig);\n        }\n      }\n      \n      if (response.status === 0 || response.type === 'opaque') {\n        throw new Error('CORS error: Unable to fetch resource');\n      }\n      \n      let data;\n      const contentType = response.headers.get('content-type');\n      if (contentType && contentType.includes('application/json')) {\n        data = await response.json();\n      } else {\n        const text = await response.text();\n        try {\n          data = JSON.parse(text);\n        } catch {\n          data = { detail: text };\n        }\n      }\n      \n      if (!response.ok) {\n        throw new Error(data.detail || `HTTP error! status: ${response.status}`);\n      }\n      \n      return data;\n    } catch (error) {\n      console.error('API request error:', error);\n      throw error;\n    }\n  }\n\n  async createUser(userData) {\n    return this.request('/users/', {\n      method: 'POST',\n      body: userData,\n    });\n  }\n\n  async getUser(userId) {\n    return this.request(`/users/${userId}/`);\n  }\n\n  async updateUser(userId, userData) {\n    return this.request(`/users/${userId}/`, {\n      method: 'PUT',\n      body: userData,\n    });\n  }\n\n  async getSubscription(userId) {\n    return this.request(`/users/${userId}/subscription/`);\n  }\n\n  async createSubscription(userId, subscriptionData) {\n    return this.request(`/users/${userId}/subscription/`, {\n      method: 'POST',\n      body: subscriptionData,\n    });\n  }\n}\n\nexport default new ApiService();\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
{"ast":null,"code":"import _objectSpread from\"/Users/nikitamozaev/Desktop/beznet_miniapp/front/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";const API_BASE_URL='https://api.real-2.space';class ApiService{async request(endpoint){let options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};let url=\"\".concat(API_BASE_URL).concat(endpoint);if(!endpoint.endsWith('/')&&!endpoint.includes('?')){url=\"\".concat(url,\"/\");}const config={method:options.method||'GET',mode:'cors',credentials:'omit',redirect:'follow',headers:_objectSpread({'Content-Type':'application/json','Accept':'application/json'},options.headers)};if(options.body){if(typeof options.body==='object'){config.body=JSON.stringify(options.body);}else{config.body=options.body;}}try{const response=await fetch(url,config);if(response.status===307||response.status===308){const redirectUrl=response.headers.get('Location');if(redirectUrl){const redirectResponse=await fetch(redirectUrl,config);const data=await redirectResponse.json();if(!redirectResponse.ok){throw new Error(data.detail||\"HTTP error! status: \".concat(redirectResponse.status));}return data;}}let data;const contentType=response.headers.get('content-type');if(contentType&&contentType.includes('application/json')){data=await response.json();}else{const text=await response.text();try{data=JSON.parse(text);}catch(_unused){data={detail:text};}}if(!response.ok){throw new Error(data.detail||\"HTTP error! status: \".concat(response.status));}return data;}catch(error){console.error('API request error:',error);throw error;}}async createUser(userData){return this.request('/users/',{method:'POST',body:userData});}async getUser(userId){return this.request(\"/users/\".concat(userId,\"/\"));}async updateUser(userId,userData){return this.request(\"/users/\".concat(userId,\"/\"),{method:'PUT',body:userData});}async getSubscription(userId){return this.request(\"/users/\".concat(userId,\"/subscription/\"));}async createSubscription(userId,subscriptionData){return this.request(\"/users/\".concat(userId,\"/subscription/\"),{method:'POST',body:subscriptionData});}}export default new ApiService();","map":{"version":3,"names":["API_BASE_URL","ApiService","request","endpoint","options","arguments","length","undefined","url","concat","endsWith","includes","config","method","mode","credentials","redirect","headers","_objectSpread","body","JSON","stringify","response","fetch","status","redirectUrl","get","redirectResponse","data","json","ok","Error","detail","contentType","text","parse","_unused","error","console","createUser","userData","getUser","userId","updateUser","getSubscription","createSubscription","subscriptionData"],"sources":["/Users/nikitamozaev/Desktop/beznet_miniapp/front/src/services/api.js"],"sourcesContent":["const API_BASE_URL = 'https://api.real-2.space';\n\nclass ApiService {\n  async request(endpoint, options = {}) {\n    let url = `${API_BASE_URL}${endpoint}`;\n    \n    if (!endpoint.endsWith('/') && !endpoint.includes('?')) {\n      url = `${url}/`;\n    }\n    \n    const config = {\n      method: options.method || 'GET',\n      mode: 'cors',\n      credentials: 'omit',\n      redirect: 'follow',\n      headers: {\n        'Content-Type': 'application/json',\n        'Accept': 'application/json',\n        ...options.headers,\n      },\n    };\n\n    if (options.body) {\n      if (typeof options.body === 'object') {\n        config.body = JSON.stringify(options.body);\n      } else {\n        config.body = options.body;\n      }\n    }\n\n    try {\n      const response = await fetch(url, config);\n      \n      if (response.status === 307 || response.status === 308) {\n        const redirectUrl = response.headers.get('Location');\n        if (redirectUrl) {\n          const redirectResponse = await fetch(redirectUrl, config);\n          const data = await redirectResponse.json();\n          \n          if (!redirectResponse.ok) {\n            throw new Error(data.detail || `HTTP error! status: ${redirectResponse.status}`);\n          }\n          \n          return data;\n        }\n      }\n      \n      let data;\n      const contentType = response.headers.get('content-type');\n      if (contentType && contentType.includes('application/json')) {\n        data = await response.json();\n      } else {\n        const text = await response.text();\n        try {\n          data = JSON.parse(text);\n        } catch {\n          data = { detail: text };\n        }\n      }\n      \n      if (!response.ok) {\n        throw new Error(data.detail || `HTTP error! status: ${response.status}`);\n      }\n      \n      return data;\n    } catch (error) {\n      console.error('API request error:', error);\n      throw error;\n    }\n  }\n\n  async createUser(userData) {\n    return this.request('/users/', {\n      method: 'POST',\n      body: userData,\n    });\n  }\n\n  async getUser(userId) {\n    return this.request(`/users/${userId}/`);\n  }\n\n  async updateUser(userId, userData) {\n    return this.request(`/users/${userId}/`, {\n      method: 'PUT',\n      body: userData,\n    });\n  }\n\n  async getSubscription(userId) {\n    return this.request(`/users/${userId}/subscription/`);\n  }\n\n  async createSubscription(userId, subscriptionData) {\n    return this.request(`/users/${userId}/subscription/`, {\n      method: 'POST',\n      body: subscriptionData,\n    });\n  }\n}\n\nexport default new ApiService();\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}